<!doctype html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Tic Tac Toe</title><script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script><script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script><script src="https://unpkg.com/@babel/standalone/babel.min.js"></script><script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script><style>body.light{background:#fff;color:#000}body.dark{background:#121212;color:#fff}.square{width:60px;height:60px;font-size:24px;margin:2px}.board-row{display:flex;justify-content:center}.game{font-family:sans-serif;text-align:center;padding:20px}.controls,.game-info{margin-top:10px}.scoreboard{margin-bottom:10px;font-weight:700}.winning{background-color:#ff0}</style><script defer="defer" src="/Game1_TicTacToe/static/js/main.9fb0cf8f.js"></script><link href="/Game1_TicTacToe/static/css/main.4387da8d.css" rel="stylesheet"></head><body class="light"><div id="root"></div><script type="text/babel">const { useState, useEffect } = React;

    function Square({ value, onClick, isWinning }) {
      return (
        <button className={"square" + (isWinning ? " winning" : "")} onClick={onClick}>
          {value}
        </button>
      );
    }

    function Board({ squares, onClick, winningLine }) {
      return (
        <div>
          {[0, 1, 2].map((row) => (
            <div key={row} className="board-row">
              {[0, 1, 2].map((col) => {
                const index = row * 3 + col;
                const isWinning = winningLine.includes(index);
                return (
                  <Square
                    key={index}
                    value={squares[index]}
                    onClick={() => onClick(index)}
                    isWinning={isWinning}
                  />
                );
              })}
            </div>
          ))}
        </div>
      );
    }

    function calculateWinner(squares) {
      const lines = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8],
        [0, 3, 6], [1, 4, 7], [2, 5, 8],
        [0, 4, 8], [2, 4, 6]
      ];
      for (const [a, b, c] of lines) {
        if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {
          return { winner: squares[a], line: [a, b, c] };
        }
      }
      return null;
    }

    function getAvailableMoves(squares) {
      return squares.map((val, idx) => val ? null : idx).filter(i => i !== null);
    }

    function minimax(squares, depth, isMaximizing) {
      const result = calculateWinner(squares);
      if (result?.winner === 'O') return { score: 10 - depth };
      if (result?.winner === 'X') return { score: depth - 10 };
      if (squares.every(Boolean)) return { score: 0 };

      const moves = getAvailableMoves(squares);
      let bestMove = null;

      if (isMaximizing) {
        let maxEval = -Infinity;
        for (let move of moves) {
          squares[move] = 'O';
          const evalResult = minimax(squares, depth + 1, false);
          squares[move] = null;
          if (evalResult.score > maxEval) {
            maxEval = evalResult.score;
            bestMove = move;
          }
        }
        return { score: maxEval, move: bestMove };
      } else {
        let minEval = Infinity;
        for (let move of moves) {
          squares[move] = 'X';
          const evalResult = minimax(squares, depth + 1, true);
          squares[move] = null;
          if (evalResult.score < minEval) {
            minEval = evalResult.score;
            bestMove = move;
          }
        }
        return { score: minEval, move: bestMove };
      }
    }

    function App() {
      const [history, setHistory] = useState(() => {
        const saved = localStorage.getItem('ticTacToeHistory');
        return saved ? JSON.parse(saved) : [{ squares: Array(9).fill(null), moveLocation: null }];
      });

      const [stepNumber, setStepNumber] = useState(() => {
        const saved = localStorage.getItem('ticTacToeStep');
        return saved ? JSON.parse(saved) : 0;
      });

      const [scores, setScores] = useState(() => {
        const saved = localStorage.getItem('ticTacToeScores');
        return saved ? JSON.parse(saved) : { X: 0, O: 0 };
      });

      const [ascending, setAscending] = useState(true);
      const [theme, setTheme] = useState('light');
      const xIsNext = stepNumber % 2 === 0;
      const current = history[stepNumber];

      const result = calculateWinner(current.squares);
      const winner = result?.winner || null;
      const winningLine = result?.line || [];
      const isBoardFull = current.squares.every(Boolean);
      const isGameOver = winner || isBoardFull;

      useEffect(() => {
        localStorage.setItem('ticTacToeHistory', JSON.stringify(history));
        localStorage.setItem('ticTacToeStep', JSON.stringify(stepNumber));
        localStorage.setItem('ticTacToeScores', JSON.stringify(scores));
      }, [history, stepNumber, scores]);

      const handleClick = (i) => {
        const hist = history.slice(0, stepNumber + 1);
        const currentSquares = hist[hist.length - 1].squares.slice();
        if (isGameOver || currentSquares[i]) return;

        currentSquares[i] = xIsNext ? 'X' : 'O';
        const row = Math.floor(i / 3) + 1;
        const col = (i % 3) + 1;

        const nextHistory = hist.concat([{ squares: currentSquares, moveLocation: { row, col } }]);
        setHistory(nextHistory);
        setStepNumber(nextHistory.length - 1);

        const result = calculateWinner(currentSquares);
        if (result?.winner) {
          setScores((prev) => ({
            ...prev,
            [result.winner]: prev[result.winner] + 1,
          }));

          if (result.winner) {
            confetti();
          }
        }
      };

      useEffect(() => {
        if (!xIsNext && !isGameOver) {
          const currentSquares = current.squares.slice();
          const bestMove = minimax(currentSquares, 0, true).move;
          if (bestMove != null) {
            setTimeout(() => handleClick(bestMove), 400);
          }
        }
      }, [xIsNext, stepNumber]);

      const moves = history.map((step, move) => {
        const desc = move
          ? `Go to move #${move} (${step.moveLocation?.row}, ${step.moveLocation?.col})`
          : 'Go to game start';
        return (
          <li key={move}>
            {move === stepNumber ? (
              <strong>You are at move #{move}</strong>
            ) : (
              <button onClick={() => setStepNumber(move)}>{desc}</button>
            )}
          </li>
        );
      });

      if (!ascending) moves.reverse();

      const handleRestart = () => {
        const initial = [{ squares: Array(9).fill(null), moveLocation: null }];
        setHistory(initial);
        setStepNumber(0);
      };

      const toggleTheme = () => {
        const newTheme = theme === 'light' ? 'dark' : 'light';
        setTheme(newTheme);
        document.body.className = newTheme;
      };

      const status = winner
        ? `Winner: ${winner}`
        : isBoardFull
        ? "It's a draw!"
        : `Next player: ${xIsNext ? 'X (You)' : 'O (AI)'}`;

      return (
        <div className={`game ${theme}`}>
          <h1>Tic Tac Toe</h1>
          <div className="scoreboard">
            <div>X (You): {scores.X}</div>
            <div>O (AI): {scores.O}</div>
          </div>
          <div className="game-board">
            <Board squares={current.squares} onClick={handleClick} winningLine={winningLine} />
          </div>
          <div className="game-info">
            <div>{status}</div>
            <div className="controls">
              <button onClick={() => setAscending(!ascending)}>Toggle Sort ({ascending ? 'Asc' : 'Desc'})</button>
              <button onClick={handleRestart}>Restart Game</button>
              <button onClick={toggleTheme}>Toggle Theme</button>
            </div>
            <ol>{moves}</ol>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);</script></body></html>